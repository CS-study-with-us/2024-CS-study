## JWT

1. JWT는 유저를 인증하고 식별하기 위한 토큰(Token) 기반 인증입니다.
2. 토큰 자체에 사용자의 권한 정보나 서비스를 사용하기 위한 정보가 포함됩니다.
3. 무상태(Stateless)인 환경에서 사용자 데이터를 주고받을 수 있습니다.
4. 세션(Session)을 사용하게 될 경우 쿠키 등을 통해 사용자를 식별하고 서버에 세션을 저장했지만, 토큰을 클라이언트에 저장하고 요청시 HTTP 헤더에 토큰을 첨부하는 것만으로도 단순하게 데이터를 요청하고 응답받을 수 있습니다.

## JWT 토큰 구성
![img](https://blog.bizspring.co.kr/wp-content/uploads/2023/12/JWT-%EA%B5%AC%EC%A1%B0.png)

JWT는 세 파트로 나누어지며, 각 파트는 점로 구분하여 xxxxx.yyyyy.zzzzz 이런식으로 표현됩니다. 순서대로 헤더 (Header), 페이로드 (Payload), 서명 (Sinature)로 구성합니다.
Base64 인코딩의 경우 “+”, “/”, “=”이 포함되지만 JWT는 URI에서 파라미터로 사용할 수 있도록 URL-Safe 한  Base64url 인코딩을 사용합니다.

#### Header
토큰의 타입과 해시 암호화 알고리즘으로 구성되어 있습니다. 첫째는 토큰의 유형 (JWT)을 나타내고, 두 번째는 HMAC, SHA256 또는 RSA와 같은 해시 알고리즘을 나타내는 부분입니다.
#### Payload
토큰에 담을 클레임(claim) 정보를 포함하고 있습니다. Payload 에 담는 정보의 한 조각을 클레임이라고 부르고, 이는 name/value 의 한 쌍으로 이뤄져있습니다. 토큰에는 여러개의 클레임들을 넣을 수 있습니다.
클레임의 정보는 등록(registered) 클레임, 공개(public) 클레임, 비공개(private) 클레임으로 세 종류가 있습니다.
#### Signature
 secret key를 포함하여 암호화되어 있습니다.

## JWT 인증 과정
![img](https://velog.velcdn.com/images/gimminjae/post/c2ed0742-909b-4cbd-a9ef-0acc69831a03/image.png)
1. 클라이언트가 id, pw와 함께 서버에 로그인을 요청합니다.
2. 서버가 요청을 받고, Header, Payload, Signature를 정의하고 Base64로 인코딩(암호화)하여 JWT를 생성해 쿠키에 담아 클라이언트에게 발급합니다.
3. 클라이언트는 JWT를 로컬 저장소에 저장하고 서버에 요청을 보낼 때 Authorization header에 Access Token을 담아서 보냅니다.
4. 서버는 클라이언트가 Header에 담아 보낸 JWT가 서버에서 발급한 토큰인지 일치 여부를 확인해 인증을 통과 혹은 거부를 합니다.
5. 클라이언트의 Access Token의 시간이 만료되면 Refresh Token을 사용해 새로운 Access Token을 발급받습니다.

## JWT 장단점

#### 장점
- 토큰 검증만을 통해 사용자 정보를 확인가능해 추가 검증 로직이 필요 업습니다.
- 매번 세션이나 데이터베이스 같은 인증 저장소가 필요 없습니다.
- 사용자가 늘어나더라도 사용자 인증을 위한 추가 리소스 비용이 없습니다.
- 다른 서비스에 공통 스펙으로 사용이 가능하여 확장성이 높습니다.

#### 단점
- 토큰 길이: 토큰의 페이로드(Payload)에 3종류의 클레임을 저장하기 때문에 정보가 많아질수록 토큰의 길이가 늘어나 네트워크에 부하를 줄 수 있습니다.
- Payload 인코딩: 페이로드(Payload) 자체는 암호화 된 것이 아니라 BASE64로 인코딩 된 것입니다. 중간에 Payload를 탈취하여 디코딩하면 데이터를 볼 수 있으므로 JWE로 암호화하거나 Payload에 중요 데이터를 넣지 않아야 합니다.
- Stateless: JWT는 상태를 저장하지 않기 때문에 한번 만들어지면 제어가 불가능합니다. 즉, 토큰을 임의로 삭제하는 것이 불가능하므로 토큰 만료 시간을 꼭 넣어주어야 합니다.
- Tore Token: 토큰은 클라이언트 측에서 관리해야 하기 때문에, 토큰을 저장해야 합니다.



## 예상 질문

1. JWT에 대해 설명해주세요.
2. JWT의 장단점에 대해 설명해주세요.

## 참고 자료

<!-- 공부 과정에서 참고한 자료가 있다면, 첨부해주세요-->
<!-- * [자료주제](링크)  -->
- [JWT 이해와 활용](http://www.opennaru.com/opennaru-blog/jwt-json-web-token/)
- [JWT토큰이란, 장단점, 구현]( https://gorokke.tistory.com)